# Gulp

***Gulp*** - игровой движок для создания консольных текстовых квестов написанный на *Java/Kotlin*.
Весь сценарий игры описывается в удобном формате ```JSON```.

Игра представляется в виде ориентированного взвешенного графа. Игрок каждый момент игры находится в какой-то вершине графа с определенным состоянием инвентаря, и все действия игрока будут ребрами изменяющими инвентарь и нынешнюю вершину игрока.

У каждого ребра есть требования, которые обязательно должны быть удовлетворены для перехода по этому ребру. Среди доступных(если требовония учтены) ребер выбирается с самым большим приоритетом, если таких несколько игроку дается выбор.
(data:image/svg+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3C!--%20Generated%20by%20graphviz%20version%202.40.1%20(20161225.0304)%0A%20--%3E%3C!--%20Title%3A%20%250%20Pages%3A%201%20--%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%22312pt%22%20height%3D%22399pt%22%20viewBox%3D%220.00%200.00%20311.79%20399.20%22%3E%0A%3Cg%20id%3D%22graph0%22%20class%3D%22graph%22%20transform%3D%22scale(1%201)%20rotate(0)%20translate(4%20395.2)%22%3E%0A%3Ctitle%3E%250%3C%2Ftitle%3E%0A%3Cpolygon%20fill%3D%22%23ffffff%22%20stroke%3D%22transparent%22%20points%3D%22-4%2C4%20-4%2C-395.2%20307.7891%2C-395.2%20307.7891%2C4%20-4%2C4%22%2F%3E%0A%3C!--%20home%20--%3E%0A%3Cg%20id%3D%22node1%22%20class%3D%22node%22%3E%0A%3Ctitle%3Ehome%3C%2Ftitle%3E%0A%3Cellipse%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20cx%3D%22203.7891%22%20cy%3D%22-373.2%22%20rx%3D%2232.4846%22%20ry%3D%2218%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%22203.7891%22%20y%3D%22-369%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3Ehome%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20cave%20--%3E%0A%3Cg%20id%3D%22node2%22%20class%3D%22node%22%3E%0A%3Ctitle%3Ecave%3C%2Ftitle%3E%0A%3Cellipse%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20cx%3D%2281.7891%22%20cy%3D%22-284.4%22%20rx%3D%2228.952%22%20ry%3D%2218%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%2281.7891%22%20y%3D%22-280.2%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3Ecave%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20home%26%2345%3B%26gt%3Bcave%20--%3E%0A%3Cg%20id%3D%22edge1%22%20class%3D%22edge%22%3E%0A%3Ctitle%3Ehome-%26gt%3Bcave%3C%2Ftitle%3E%0A%3Cpath%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20d%3D%22M182.5194%2C-359.529C172.477%2C-352.9456%20160.3953%2C-344.8379%20149.7891%2C-337.2%20135.5984%2C-326.9807%20120.1752%2C-315.0737%20107.6102%2C-305.1563%22%2F%3E%0A%3Cpolygon%20fill%3D%22%23000000%22%20stroke%3D%22%23000000%22%20points%3D%22109.4267%2C-302.1296%2099.4183%2C-298.6535%20105.0745%2C-307.6122%20109.4267%2C-302.1296%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%22153.2891%22%20y%3D%22-324.6%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3E0%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20palace%20--%3E%0A%3Cg%20id%3D%22node3%22%20class%3D%22node%22%3E%0A%3Ctitle%3Epalace%3C%2Ftitle%3E%0A%3Cellipse%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20cx%3D%22147.7891%22%20cy%3D%22-18%22%20rx%3D%2235.8921%22%20ry%3D%2218%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%22147.7891%22%20y%3D%22-13.8%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3Epalace%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20home%26%2345%3B%26gt%3Bpalace%20--%3E%0A%3Cg%20id%3D%22edge3%22%20class%3D%22edge%22%3E%0A%3Ctitle%3Ehome-%26gt%3Bpalace%3C%2Ftitle%3E%0A%3Cpath%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20d%3D%22M193.1661%2C-355.8776C183.5191%2C-338.4724%20170.7891%2C-310.5504%20170.7891%2C-284.4%20170.7891%2C-284.4%20170.7891%2C-284.4%20170.7891%2C-106.8%20170.7891%2C-85.6329%20164.5891%2C-62.5083%20158.6272%2C-45.1646%22%2F%3E%0A%3Cpolygon%20fill%3D%22%23000000%22%20stroke%3D%22%23000000%22%20points%3D%22161.8884%2C-43.8907%20155.1931%2C-35.6795%20155.3065%2C-46.2737%20161.8884%2C-43.8907%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%22174.2891%22%20y%3D%22-191.4%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3E0%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20dealer%20--%3E%0A%3Cg%20id%3D%22node6%22%20class%3D%22node%22%3E%0A%3Ctitle%3Edealer%3C%2Ftitle%3E%0A%3Cellipse%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20cx%3D%22233.7891%22%20cy%3D%22-284.4%22%20rx%3D%2234.7476%22%20ry%3D%2218%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%22233.7891%22%20y%3D%22-280.2%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3Edealer%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20home%26%2345%3B%26gt%3Bdealer%20--%3E%0A%3Cg%20id%3D%22edge9%22%20class%3D%22edge%22%3E%0A%3Ctitle%3Ehome-%26gt%3Bdealer%3C%2Ftitle%3E%0A%3Cpath%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20d%3D%22M202.2657%2C-355.0794C202.0079%2C-344.6392%20202.7579%2C-331.4392%20206.7891%2C-320.4%20208.196%2C-316.5473%20210.1614%2C-312.7607%20212.3971%2C-309.1752%22%2F%3E%0A%3Cpolygon%20fill%3D%22%23000000%22%20stroke%3D%22%23000000%22%20points%3D%22215.4353%2C-310.9405%20218.3469%2C-300.7536%20209.7182%2C-306.9014%20215.4353%2C-310.9405%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%22210.2891%22%20y%3D%22-324.6%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3E0%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20cave%26%2345%3B%26gt%3Bpalace%20--%3E%0A%3Cg%20id%3D%22edge2%22%20class%3D%22edge%22%3E%0A%3Ctitle%3Ecave-%26gt%3Bpalace%3C%2Ftitle%3E%0A%3Cpath%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20d%3D%22M67.3859%2C-268.7532C37.5068%2C-234.3187%20-25.4449%2C-150.1609%2011.7891%2C-88.8%2031.8505%2C-55.7392%2072.9407%2C-37.401%20104.7318%2C-27.7226%22%2F%3E%0A%3Cpolygon%20fill%3D%22%23000000%22%20stroke%3D%22%23000000%22%20points%3D%22106.0352%2C-30.9903%20114.6883%2C-24.8768%20104.1115%2C-24.2598%20106.0352%2C-30.9903%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%227.2891%22%20y%3D%22-147%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3E0%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20dungeon%20--%3E%0A%3Cg%20id%3D%22node4%22%20class%3D%22node%22%3E%0A%3Ctitle%3Edungeon%3C%2Ftitle%3E%0A%3Cellipse%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20cx%3D%2281.7891%22%20cy%3D%22-195.6%22%20rx%3D%2244.0891%22%20ry%3D%2218%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%2281.7891%22%20y%3D%22-191.4%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3Edungeon%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20cave%26%2345%3B%26gt%3Bdungeon%20--%3E%0A%3Cg%20id%3D%22edge4%22%20class%3D%22edge%22%3E%0A%3Ctitle%3Ecave-%26gt%3Bdungeon%3C%2Ftitle%3E%0A%3Cpath%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20d%3D%22M81.7891%2C-266.0006C81.7891%2C-253.8949%2081.7891%2C-237.8076%2081.7891%2C-224.0674%22%2F%3E%0A%3Cpolygon%20fill%3D%22%23000000%22%20stroke%3D%22%23000000%22%20points%3D%2285.2892%2C-223.672%2081.7891%2C-213.672%2078.2892%2C-223.6721%2085.2892%2C-223.672%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%2285.2891%22%20y%3D%22-235.8%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3E1%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20palace%26%2345%3B%26gt%3Bhome%20--%3E%0A%3Cg%20id%3D%22edge5%22%20class%3D%22edge%22%3E%0A%3Ctitle%3Epalace-%26gt%3Bhome%3C%2Ftitle%3E%0A%3Cpath%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20d%3D%22M182.3472%2C-23.0684C226.3633%2C-31.7031%20296.7891%2C-53.8%20296.7891%2C-106.8%20296.7891%2C-284.4%20296.7891%2C-284.4%20296.7891%2C-284.4%20296.7891%2C-317.7491%20265.1207%2C-342.4153%20238.7435%2C-357.1762%22%2F%3E%0A%3Cpolygon%20fill%3D%22%23000000%22%20stroke%3D%22%23000000%22%20points%3D%22236.8847%2C-354.2003%20229.6948%2C-361.9822%20240.1682%2C-360.3825%20236.8847%2C-354.2003%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%22300.2891%22%20y%3D%22-191.4%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3E0%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20monsters%20lair%20--%3E%0A%3Cg%20id%3D%22node5%22%20class%3D%22node%22%3E%0A%3Ctitle%3Emonsters%20lair%3C%2Ftitle%3E%0A%3Cellipse%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20cx%3D%2281.7891%22%20cy%3D%22-106.8%22%20rx%3D%2261.3706%22%20ry%3D%2218%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%2281.7891%22%20y%3D%22-102.6%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3Emonsters%20lair%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20dungeon%26%2345%3B%26gt%3Bmonsters%20lair%20--%3E%0A%3Cg%20id%3D%22edge7%22%20class%3D%22edge%22%3E%0A%3Ctitle%3Edungeon-%26gt%3Bmonsters%20lair%3C%2Ftitle%3E%0A%3Cpath%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20d%3D%22M81.7891%2C-177.2006C81.7891%2C-165.0949%2081.7891%2C-149.0076%2081.7891%2C-135.2674%22%2F%3E%0A%3Cpolygon%20fill%3D%22%23000000%22%20stroke%3D%22%23000000%22%20points%3D%2285.2892%2C-134.872%2081.7891%2C-124.872%2078.2892%2C-134.8721%2085.2892%2C-134.872%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%2285.2891%22%20y%3D%22-147%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3E0%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20monsters%20lair%26%2345%3B%26gt%3Bpalace%20--%3E%0A%3Cg%20id%3D%22edge6%22%20class%3D%22edge%22%3E%0A%3Ctitle%3Emonsters%20lair-%26gt%3Bpalace%3C%2Ftitle%3E%0A%3Cpath%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20d%3D%22M95.1452%2C-88.83C104.9062%2C-75.697%20118.2723%2C-57.7135%20129.0937%2C-43.1538%22%2F%3E%0A%3Cpolygon%20fill%3D%22%23000000%22%20stroke%3D%22%23000000%22%20points%3D%22131.9685%2C-45.1533%20135.1247%2C-35.0394%20126.3503%2C-40.9776%20131.9685%2C-45.1533%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%22124.2891%22%20y%3D%22-58.2%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3E0%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C!--%20dealer%26%2345%3B%26gt%3Bhome%20--%3E%0A%3Cg%20id%3D%22edge8%22%20class%3D%22edge%22%3E%0A%3Ctitle%3Edealer-%26gt%3Bhome%3C%2Ftitle%3E%0A%3Cpath%20fill%3D%22none%22%20stroke%3D%22%23000000%22%20d%3D%22M227.7272%2C-302.3433C223.541%2C-314.7344%20217.8929%2C-331.4529%20213.1343%2C-345.5384%22%2F%3E%0A%3Cpolygon%20fill%3D%22%23000000%22%20stroke%3D%22%23000000%22%20points%3D%22209.7449%2C-344.6358%20209.8601%2C-355.23%20216.3767%2C-346.8763%20209.7449%2C-344.6358%22%2F%3E%0A%3Ctext%20text-anchor%3D%22middle%22%20x%3D%22224.2891%22%20y%3D%22-324.6%22%20font-family%3D%22Times%2Cserif%22%20font-size%3D%2214.00%22%20fill%3D%22%23000000%22%3E0%3C%2Ftext%3E%0A%3C%2Fg%3E%0A%3C%2Fg%3E%0A%3C%2Fsvg%3E)
# Структура

## Scene

| Атрибуты |        Тип          |             Описание                                     |
|:---------|:--------------------|:---------------------------------------------------------|
|   text   | ```Text```          | Сообщение выводящееся на экран при перемещение на данную сцену.                                                                                      |
|   edges  | ```List<Edge>```    | Список всех возможных переходов из данной вершины.       |
| newItems | ```Requirement```   | Словарь добавляемых в инвентарь предметов при посещении этой вершины. **Внимание!** Предметы добавляются сразу  *после* выхода из этой вершины.   |
## Edge
| Атрибуты     |        Тип          | Описание                                             |
|:-------------|:--------------------|:-----------------------------------------------------|
|    text      |   ```Text```        | Сообщение выводящееся на экран, при выборе.          |
| nextScene    |   ```String```      | Название вершины в которую перейдет игрок при выборе данного ребра.                                                                              |
| requirements |   ```Requirement``` | Требуемые для перехода в данную вершину предметы инвенторя.                                                                                  |
| priority     |  ```Long```        | Приоритет ребра.                                     |
## Requirement
Cловарь, где ключ является названием предмета, а значение количеством.
* ```Key``` - ```String```
* ```Value``` - ```Int```
## Text
Является списком объектов. Каждый объект имеет тип либо ```Message```, либо ```Option```.
### Message
| Атрибуты     |     Тип       |             Описание                                       |
|:-------------|:--------------|:-----------------------------------------------------------|
|     msg      | ```String```  | Текст сообщения                                            |
|   color      | ```String```  |  Цвет сообщения.  Все возможны цвета можете найти ниже в разделе **Color**                                                                           |
|    back      | ```String```  |  Цвет фона сообщения. Может быть тех же цветов, что и color|
### Option
| Атрибуты     |        Тип    |             Описание                                       |
|:-------------|:--------------|:-----------------------------------------------------------|
| pause        |   ```Long```  |   Число милисекунд бездействия. В этот момент в игре ничего не происходит.                                                                              |
| sound        |  ```String``` |  Путь к файлу звука. Аудио-файл обязан быть в формате WAV. Если в этот момент проигрывается другой файл, то он прервется и начнется новый.                                              |


**Внимание!** Сначала начнет проигрываеться мелодия, и только потом начнется пауза.
### Color
Может быть выражен 8 цветами.
* ```Black```
* ```Red```
* ```Green```
* ```Yellow```
* ```Blue```
* ```Purple```
* ```Cyan```
* ```White```
## Game
Вся игра описывается, как словарь, где ключ это название вершины, а значение это сама сцена.
* ```Key``` - ```String```
* ```Value``` - ```Scene```
## Общая структура
В файле будет содержатся один словарь с двумя полями.
```game``` - являющийся ```Game```
```begin``` - сцена с которой начинается игра.
# Установка и использование
В папке **source** есть искодный код на *Java/Kotlin*. В папке **program** лежит **gulp.jar** файл.
Его можно запустить через консоль командой:
```java -jar gulp.jar```
У вас должна быть версия **java 1.8** или выше.
В папке с **gulp.jar** обязательно должен быть файл ```Config.txt```
## Config
|   Поле               |  Описание                                          |
|----------------------|----------------------------------------------------|
|```[SOURCE_FILE]```   | Путь к ```JSON``` файлу с игрой                    |
## Запуск
После запуска **gulp.jar** запуститься сценарий написанный в ```[SOURCE_FILE]```.
